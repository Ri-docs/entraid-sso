<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Integrating EntraID with RapidIdentity for SSO</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    code, pre { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
    .copy-btn { opacity: 0; transition: opacity .15s ease; }
    pre:hover .copy-btn { opacity: 1; }
  </style>
</head>
<body class="bg-slate-50 text-slate-800">
  <header class="bg-gradient-to-br from-indigo-600 via-sky-600 to-cyan-500 text-white">
    <div class="mx-auto max-w-4xl px-6 py-10">
      <h1 class="text-3xl md:text-4xl font-semibold tracking-tight">Integrating EntraID with RapidIdentity for SSO</h1>
      <p class="mt-2 text-white/90">RapidIdentity as SAML IdP for Microsoft Entra ID using Microsoft Graph and Entra PowerShell.</p>
    </div>
  </header>

  <main class="mx-auto max-w-4xl px-6 py-10 space-y-10">
    <nav class="rounded-xl border border-slate-200 bg-white p-5 shadow-sm">
      <h2 class="font-semibold">Contents</h2>
      <ol class="mt-3 grid gap-1 sm:grid-cols-2 text-slate-700">
        <li><a class="hover:text-sky-600" href="#overview">Overview</a></li>
        <li><a class="hover:text-sky-600" href="#prereqs">Prerequisites</a></li>
        <li><a class="hover:text-sky-600" href="#install-connect">Install and connect</a></li>
        <li><a class="hover:text-sky-600" href="#rapididentity">RapidIdentity configuration</a></li>
        <li><a class="hover:text-sky-600" href="#federate">Create federation</a></li>
        <li><a class="hover:text-sky-600" href="#maintain">Update and maintenance</a></li>
        <li><a class="hover:text-sky-600" href="#rollback">Rollback to managed</a></li>
        <li><a class="hover:text-sky-600" href="#multi-domain">Multiple domains</a></li>
        <li><a class="hover:text-sky-600" href="#screenshots">Screenshots</a></li>
      </ol>
    </nav>

    <section id="overview" class="rounded-xl border border-slate-200 bg-white p-6 shadow-sm">
      <h2 class="text-2xl font-semibold">Overview</h2>
      <p class="mt-3">This guide configures RapidIdentity as a SAML identity provider for Microsoft Entra ID. The steps create a federation configuration for a verified custom domain and cover install, setup, federation, maintenance, and rollback.</p>
    </section>

    <section id="prereqs" class="rounded-xl border border-slate-200 bg-white p-6 shadow-sm">
      <h2 class="text-2xl font-semibold">Prerequisites</h2>
      <ul class="mt-3 list-disc ml-6">
        <li>Verified custom domain in Microsoft Entra ID.</li>
        <li>Entra permissions to manage domains.</li>
        <li>RapidIdentity IdP entityID, SAML SSO URL, optional SLO URL, and the IdP signing certificate (X.509 public cert).</li>
        <li>Access to Microsoft Entra relying party metadata for import into RapidIdentity.</li>
      </ul>
    </section>

    <section id="install-connect" class="rounded-xl border border-slate-200 bg-white p-6 shadow-sm">
      <h2 class="text-2xl font-semibold">Install and connect</h2>
      <div class="relative mt-4">
        <button class="copy-btn absolute right-2 top-2 rounded-md border border-slate-300 bg-white/80 px-3 py-1 text-xs text-slate-700 hover:bg-slate-100" data-copy="#code-install">Copy</button>
        <pre class="overflow-x-auto rounded-lg border border-slate-200 bg-slate-50 p-4 text-sm"><code id="code-install" class="language-powershell">Install-Module Microsoft.Entra -Scope CurrentUser -Force
Install-Module Microsoft.Graph -Scope CurrentUser -Force
Connect-Entra -Scopes 'Domain.ReadWrite.All'</code></pre>
      </div>
    </section>

    <section id="rapididentity" class="rounded-xl border border-slate-200 bg-white p-6 shadow-sm">
      <h2 class="text-2xl font-semibold">RapidIdentity configuration</h2>
      <p class="mt-3">Create a SAML relying party for Microsoft Entra ID in RapidIdentity by importing the Entra metadata URL.</p>
      <div class="relative mt-4">
        <button class="copy-btn absolute right-2 top-2 rounded-md border border-slate-300 bg-white/80 px-3 py-1 text-xs text-slate-700 hover:bg-slate-100" data-copy="#code-metadata">Copy</button>
        <pre class="overflow-x-auto rounded-lg border border-slate-200 bg-slate-50 p-4 text-sm"><code id="code-metadata" class="language-text">https://nexus.microsoftonline-p.com/federationmetadata/saml20/federationmetadata.xml</code></pre>
      </div>
      <p class="mt-3">For the China cloud, use: <code>https://nexus.partner.microsoftonline-p.cn/federationmetadata/saml20/federationmetadata.xml</code>.</p>
    </section>

    <section id="federate" class="rounded-xl border border-slate-200 bg-white p-6 shadow-sm">
      <h2 class="text-2xl font-semibold">Create federation</h2>
      <p class="mt-3">Create a domain federation configuration to enable SSO with RapidIdentity.</p>
      <div class="relative mt-4">
        <button class="copy-btn absolute right-2 top-2 rounded-md border border-slate-300 bg-white/80 px-3 py-1 text-xs text-slate-700 hover:bg-slate-100" data-copy="#code-newfed">Copy</button>
        <pre class="overflow-x-auto rounded-lg border border-slate-200 bg-slate-50 p-4 text-sm"><code id="code-newfed" class="language-powershell">$domain = 'example.com'
$IssuerUri = 'urn:rapididentity:YOUR-REALM'
$PassiveSignInUri = 'https://&lt;rapididentity-host&gt;/.../SAML2/SSO'
$SignOutUri = 'https://&lt;rapididentity-host&gt;/.../SAML2/SLO'
$ActiveSignInUri = 'https://&lt;rapididentity-host&gt;/.../PAOS'
$SigningCertBase64 = [Convert]::ToBase64String([IO.File]::ReadAllBytes('C:\path
apididentity_signing.cer'))
New-MgDomainFederationConfiguration -DomainId $domain `
  -IssuerUri $IssuerUri `
  -PassiveSignInUri $PassiveSignInUri `
  -SignOutUri $SignOutUri `
  -PreferredAuthenticationProtocol 'saml' `
  -ActiveSignInUri $ActiveSignInUri `
  -SigningCertificate $SigningCertBase64
Get-MgDomainFederationConfiguration -DomainId $domain | Format-List *</code></pre>
      </div>
    </section>

    <section id="maintain" class="rounded-xl border border-slate-200 bg-white p-6 shadow-sm">
      <h2 class="text-2xl font-semibold">Update and maintenance</h2>
      <div class="relative mt-4">
        <button class="copy-btn absolute right-2 top-2 rounded-md border border-slate-300 bg-white/80 px-3 py-1 text-xs text-slate-700 hover:bg-slate-100" data-copy="#code-update">Copy</button>
        <pre class="overflow-x-auto rounded-lg border border-slate-200 bg-slate-50 p-4 text-sm"><code id="code-update" class="language-powershell">$domain = 'example.com'
$SigningCertBase64 = [Convert]::ToBase64String([IO.File]::ReadAllBytes('C:\path
ew_signing.cer'))
Set-EntraDomainFederationSettings -DomainName $domain -SigningCertificate $SigningCertBase64
Set-EntraDomainFederationSettings -DomainName $domain `
  -PassiveLogOnUri 'https://&lt;rapididentity-host&gt;/.../SAML2/SSO' `
  -LogOffUri 'https://&lt;rapididentity-host&gt;/.../SAML2/SLO' `
  -ActiveLogOnUri 'https://&lt;rapididentity-host&gt;/.../PAOS' `
  -IssuerUri 'urn:rapididentity:YOUR-REALM' `
  -PreferredAuthenticationProtocol 'Saml'</code></pre>
      </div>
    </section>

    <section id="rollback" class="rounded-xl border border-slate-200 bg-white p-6 shadow-sm">
      <h2 class="text-2xl font-semibold">Rollback to managed</h2>
      <div class="relative mt-4">
        <button class="copy-btn absolute right-2 top-2 rounded-md border border-slate-300 bg-white/80 px-3 py-1 text-xs text-slate-700 hover:bg-slate-100" data-copy="#code-managed">Copy</button>
        <pre class="overflow-x-auto rounded-lg border border-slate-200 bg-slate-50 p-4 text-sm"><code id="code-managed" class="language-powershell">Update-MgDomain -DomainId 'example.com' -AuthenticationType 'Managed'</code></pre>
      </div>
    </section>

    <section id="multi-domain" class="rounded-xl border border-slate-200 bg-white p-6 shadow-sm">
      <h2 class="text-2xl font-semibold">Multiple domains</h2>
      <p class="mt-3">When federating multiple top-level domains, use a unique IssuerUri value for each domain. For subdomains, the issuer typically matches the parent.</p>
    </section>

    <section id="screenshots" class="rounded-xl border border-slate-200 bg-white p-6 shadow-sm">
      <h2 class="text-2xl font-semibold">Screenshots</h2>
      <div class="mt-6 grid grid-cols-1 gap-6">
        <figure class="rounded-lg border border-slate-200 bg-white p-3">
          <img src="https://cdn.document360.io/4d958006-b877-42af-8de5-00e3bb7fe41d/Images/Documentation/Identity%20Automation%20_%20RapidIdentity%20Cloud%20Authentication%20Workflows%20_%20EntraID%20students%20only%20(1).png" alt="Entra admin center SAML configuration screen" class="aspect-[16/9] w-full rounded-md object-cover" />
          <figcaption class="mt-2 text-sm text-slate-600">Figure 1</figcaption>
        </figure>
        <figure class="rounded-lg border border-slate-200 bg-white p-3">
          <img src="https://cdn.document360.io/4d958006-b877-42af-8de5-00e3bb7fe41d/Images/Documentation/Identity%20Automation%20_%20RapidIdentity%20Cloud%20Authentication%20Workflows%20_%20EntraID%20students%20only%20(2).png" alt="RapidIdentity admin metadata and endpoints" class="aspect-[16/9] w-full rounded-md object-cover" />
          <figcaption class="mt-2 text-sm text-slate-600">Figure 2</figcaption>
        </figure>
      </div>
    </section>
  </main>

  <script>
    document.querySelectorAll('[data-copy]').forEach(function(btn){btn.addEventListener('click',function(){var target=document.querySelector(btn.getAttribute('data-copy'));if(!target)return;var text=target.innerText;navigator.clipboard.writeText(text).then(function(){btn.textContent='Copied';setTimeout(function(){btn.textContent='Copy';},1400);});});});
  </script>
</body>
</html>
